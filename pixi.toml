[workspace]
authors = ["kashi-x <kashimiya.exe@gmail.com>"]
channels = ["conda-forge"]
name = "cook_planer"
platforms = ["linux-64"]
version = "0.1.0"

[tasks]
# 個別スクレイパー
scrape-keimei = "python src/scrapers/keimei_scraper.py"
scrape-tokyo = "python src/scrapers/tokyo_market_scraper.py"
scrape-mext = "python src/scrapers/mext_nutrition_scraper.py"
scrape-fish = "python src/scrapers/tokyo_fish_scraper.py"
scrape-meat = "python src/scrapers/tokyo_meat_scraper.py"
scrape-staples = "python src/scrapers/maff_price_scraper.py"

# 全スクレイパー実行
scrape-all = { depends-on = ["scrape-keimei", "scrape-tokyo", "scrape-mext", "scrape-fish", "scrape-meat", "scrape-staples"] }

# データ処理
merge = "python src/merge_data.py"
optimize = "python src/optimize.py"
report = "python src/generate_report.py"

# 一括実行
all = { depends-on = ["scrape-all", "merge", "report"] }

# APIサーバー
api = "uvicorn src.api.main:app --reload --port 8000"

[dependencies]
python = ">=3.11"
requests = "*"
beautifulsoup4 = "*"
pdfplumber = "*"
pandas = "*"
scipy = "*"
lxml = "*"
openpyxl = "*"

[pypi-dependencies]
playwright = "*"
fastapi = "*"
uvicorn = "*"
